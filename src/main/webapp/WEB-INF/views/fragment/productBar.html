<html lang="es" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<div th:fragment="productBar">
    <div th:if="${products.isEmpty()}">Товары данной категории в настоящее вреимя отсутствуют</div>
    <div th:each="product : ${products}">
        <div><a th:href="${#servletContext.getContextPath()}+'/app/product/'+${product.getURL()}">
            <img th:if="${product.getFotos().isEmpty()}" src="/files/noFoto.png" width="100px" height="100px">
            <img th:if="${!product.getFotos().isEmpty()}" th:src="'/files/'+${product.getFotos().get(0).getURL()}" width="100px" height="100px">
        </a></div>
    <div>Название: <span th:text="${product.getTitle()}"></span></div>
        <div>Описание: <span th:text="${product.getDescription()}"></span></div>
        <div>Цена: <span th:text="${product.getCost()}"></span></div>
        <div>Категория: <span th:text="${product.getCategory()}"></span></div>
    <div>
        <span th:if="${product.getAvailability() !=null and product.getAvailability() !=0}">Наличие: <span th:text="${product.getAvailability()}"></span> шт.</span>
        <span th:if="${product.getAvailability() ==null or product.getAvailability() ==0}">Нет в наличии</span>
        <a th:href="${#servletContext.getContextPath()}+'/app/product/'+${product.getURL()}">Просмотреть товар</a>
    </div>
    <div sec:authorize="hasAuthority('product:edit')">
        <span th:text="${product.getStatus()}"></span><br>
        <a th:href="${#servletContext.getContextPath()}+'/app/foto?id='+${product.getId()}">Добавить изображения</a>
        <a th:href="${#servletContext.getContextPath()}+'/app/edit?id='+${product.getId()}">Редактировать</a>
        <a th:href="${#servletContext.getContextPath()}+'/app/delete?id='+${product.getId()}">Удалить</a>
    </div>

    </div>
    <div sec:authorize="hasAuthority('product:edit')">
        <a th:href="${#servletContext.getContextPath()}+'/app/add/'">Добавить товар</a>
    </div>
</div>
